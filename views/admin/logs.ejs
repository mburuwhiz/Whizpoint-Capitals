<div class="space-y-8">
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
    <div>
      <h1 class="text-3xl font-black text-gray-900 dark:text-white tracking-tight">Immutable Audit Logs</h1>
      <p class="text-gray-500 dark:text-gray-400 mt-1 font-medium">Permanent record of all administrative actions and system overrides.</p>
    </div>
    <div class="flex gap-2">
       <button class="btn bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm text-xs font-black uppercase tracking-widest">
         <i class="fas fa-filter mr-2"></i> Filter Logs
       </button>
    </div>
  </div>

  <div class="card p-0 overflow-hidden border-none shadow-2xl bg-white dark:bg-gray-800">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-100 dark:divide-gray-700/50">
        <thead class="bg-gray-50 dark:bg-gray-900/50">
          <tr>
            <th class="px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">Timestamp</th>
            <th class="px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">Administrator</th>
            <th class="px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">Action Executed</th>
            <th class="px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">Target Entity</th>
            <th class="px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">Reason / Evidence</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-700/50 font-medium">
          <% logs.forEach(log => { %>
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors">
              <td class="px-8 py-6 whitespace-nowrap">
                <div class="text-xs font-black text-gray-900 dark:text-white"><%= log.createdAt.toLocaleDateString() %></div>
                <div class="text-[10px] text-gray-400 font-mono mt-1"><%= log.createdAt.toLocaleTimeString() %></div>
              </td>
              <td class="px-8 py-6 whitespace-nowrap">
                <div class="flex items-center gap-3">
                   <div class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-[10px] font-black text-gray-500">
                      <i class="fas fa-user-shield"></i>
                   </div>
                   <span class="text-xs font-bold"><%= log.adminId ? log.adminId.email : 'System' %></span>
                </div>
              </td>
              <td class="px-8 py-6 whitespace-nowrap">
                <span class="px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest bg-blue-100 text-blue-700">
                  <%= log.action %>
                </span>
              </td>
              <td class="px-8 py-6 whitespace-nowrap">
                <div class="text-xs font-bold text-gray-900 dark:text-white"><%= log.targetUserId ? log.targetUserId.email : 'N/A' %></div>
                <% if (log.oldValue !== undefined || log.newValue !== undefined) { %>
                  <div class="text-[10px] text-gray-400 mt-1 flex gap-2">
                    <span class="line-through"><%= typeof log.oldValue === 'object' ? 'Obj' : log.oldValue %></span>
                    <i class="fas fa-arrow-right text-[8px] mt-1"></i>
                    <span class="text-primary-600 font-black"><%= typeof log.newValue === 'object' ? 'Obj' : log.newValue %></span>
                  </div>
                <% } %>
              </td>
              <td class="px-8 py-6 whitespace-nowrap max-w-xs">
                 <div class="text-xs text-gray-600 dark:text-gray-400 truncate hover:whitespace-normal transition-all" title="<%= log.reason %>">
                    <%= log.reason %>
                 </div>
                 <% if (log.evidenceReference) { %>
                    <div class="text-[10px] font-black text-primary-600 uppercase mt-1">Ref: <%= log.evidenceReference %></div>
                 <% } %>
              </td>
            </tr>
          <% }) %>
          <% if (logs.length === 0) { %>
            <tr>
              <td colspan="5" class="px-8 py-20 text-center text-gray-400 font-bold uppercase tracking-widest text-xs italic">
                No audit logs generated yet.
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
